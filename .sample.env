# ==============================================================================
# Alpalo Backtest Engine - Environment Configuration
# ==============================================================================
#
# This is a sample environment configuration file. Copy this to .env.local
# and populate with your actual values.
#
# IMPORTANT: Never commit .env.local to version control!
#
# Setup Instructions:
# 1. Copy this file: cp .sample.env .env.local
# 2. Fill in your actual API keys and credentials
# 3. Set file permissions: chmod 600 .env.local
#
# ==============================================================================



# Node environment (development | production | test)
# Default: development
NODE_ENV=development

# ------------------------------------------------------------------------------
# MARKET DATA API CREDENTIALS
# ------------------------------------------------------------------------------
# Polygon.io API key for historical and live market data
# Required for: Paper trading, Live trading, Backtesting with real data
# Get your API key at: https://polygon.io/dashboard/api-keys
POLYGON_API_KEY=your_polygon_api_key_here

# ------------------------------------------------------------------------------
# REDIS CACHE CONFIGURATION
# ------------------------------------------------------------------------------
# Redis connection URL for persistent caching of market data and calendars
# Required for: All modes (reduces API calls and improves performance)
# Format: redis://[username:password@]host:port
#
# Options:
# - Redis Labs (cloud): https://redis.com/try-free/
# - Upstash (serverless): https://upstash.com/
# - Local Redis (Docker): redis://localhost:6379
# - Vercel KV: Get from Vercel dashboard (use Redis protocol URL, not REST API)
#
# Example with Redis Labs:
# REDIS_URL=redis://default:YOUR_PASSWORD@redis-12345.c1.us-east-1-2.ec2.cloud.redislabs.com:12345
#
# Example with local Docker Redis:
# REDIS_URL=redis://localhost:6379
#
# For production with SSL/TLS:
# REDIS_URL=rediss://default:YOUR_PASSWORD@your-host.cloud.redislabs.com:PORT
REDIS_URL=your_redis_url_here

# ------------------------------------------------------------------------------
# MULTI-ACCOUNT CONFIGURATION
# ------------------------------------------------------------------------------
# Manage multiple paper and/or live accounts simultaneously
#
# Get your Alpaca API keys at: https://alpaca.markets/
#
# Format: JSON array of account objects
# Each account object should have:
#   - name: Display name for the account
#   - key: Broker API key ID
#   - secret: Broker API secret key
#   - isPaper: true for paper trading, false for live trading
#   - broker: (optional) "Alpaca" or "Robinhood" (defaults to Alpaca)
#
# Example with multiple accounts:
# ACCOUNTS='[{"name":"Paper Account #1","key":"PKXXXXXXXXXXXXX","secret":"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX","isPaper":true,"broker":"Alpaca"},{"name":"Live Account","key":"AKXXXXXXXXXXXXX","secret":"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX","isPaper":false,"broker":"Alpaca"}]'
#
# Example with a single account:
ACCOUNTS='[{"name":"My Paper Account","key":"YOUR_PAPER_KEY","secret":"YOUR_PAPER_SECRET","isPaper":true,"broker":"Alpaca"}]'

# ------------------------------------------------------------------------------
# NOTIFICATION CONFIGURATION
# ------------------------------------------------------------------------------
# Slack API token for sending trade notifications and alerts
# Optional but recommended for live trading
#
# Setup Instructions:
# 1. Create a Slack App at: https://api.slack.com/apps
# 2. Add OAuth & Permissions -> Bot Token Scopes:
#    - chat:write (required to send messages)
#    - channels:read (optional, for channel listing)
# 3. Install the app to your workspace
# 4. Copy the "Bot User OAuth Token" (starts with xoxb-)
# 5. Invite the bot to your channels:
#    /invite @YourBotName in #alpalo-paper-account
#    /invite @YourBotName in #alpalo-paper-account-error
#    /invite @YourBotName in #alpalo-live-account
#    /invite @YourBotName in #alpalo-live-account-error
#
# Channels used:
# - #alpalo-paper-account: Paper trading notifications
# - #alpalo-paper-account-error: Paper trading errors
# - #alpalo-live-account: Live trading notifications
# - #alpalo-live-account-error: Live trading errors
SLACK_TOKEN=your_slack_bot_token_here

# ==============================================================================
# CONFIGURATION NOTES
# ==============================================================================
#
# Account Configuration:
# - ACCOUNTS environment variable is REQUIRED for paper and live trading
# - Supports multiple accounts (paper and/or live) in a single JSON array
# - Each account can be configured independently with its own credentials
#
# Trading Mode Behavior:
# - BACKTEST: Uses historical data, no API credentials required
# - PAPER: Uses paper trading accounts from ACCOUNTS, POLYGON_API_KEY required
# - LIVE: Uses live trading accounts from ACCOUNTS, POLYGON_API_KEY required
#
# Redis Cache:
# - REDIS_URL is highly recommended for all modes to cache market data
# - Reduces API calls to Polygon.io and improves performance
# - Caches OHLC data and market calendars persistently
# - See VERCEL_REDIS.md for detailed setup instructions
# - Without Redis, the system fetches fresh data on every run (slower + more API calls)
#
# Market-On-Close (MOC) Orders:
# - The system is designed for MOC order execution
# - Recommended cron schedule: 3:45 PM ET on weekdays (15 min before close)
# - Market hours validation is performed automatically
#
# Security Best Practices:
# - Never commit .env.local to version control
# - Set file permissions to 600: chmod 600 .env.local
# - Rotate API keys and Redis passwords periodically
# - Use separate keys for paper and live trading
# - Store backups of credentials in a secure password manager
# - Use SSL/TLS for Redis in production (rediss:// protocol)
#
# For more information, see:
# - README.md - Project setup and overview
# - VERCEL_REDIS.md - Redis cache setup and configuration
# - docs/DEPLOYMENT.md - Deployment and cron configuration
# - DEVELOPMENT_PLAN.md - Full development roadmap
#
# ==============================================================================
