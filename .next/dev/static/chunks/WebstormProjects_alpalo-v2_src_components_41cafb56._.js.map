{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jvila/WebstormProjects/alpalo-v2/src/components/MetricCard.tsx"],"sourcesContent":["import React from 'react';\nimport { Info } from 'lucide-react';\n\ninterface MetricCardProps {\n    label: string;\n    value: string | number;\n    benchmarks?: { label: string; value: string | number }[];\n    subValues?: { label: string; value: string | number }[];\n    trend: 'up' | 'down' | 'neutral';\n    inverse?: boolean;\n    tooltip?: string;\n}\n\nexport default function MetricCard({\n    label,\n    value,\n    benchmarks,\n    subValues,\n    trend,\n    inverse,\n    tooltip\n}: MetricCardProps) {\n    const isPositive = trend === 'up';\n\n    let colorClass = 'text-gray-900';\n    if (trend !== 'neutral') {\n        if (inverse) {\n            colorClass = isPositive ? 'text-red-600' : 'text-green-600';\n        } else {\n            colorClass = isPositive ? 'text-green-600' : 'text-red-600';\n        }\n    }\n\n    return (\n        <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200 group relative flex flex-col justify-between h-full\">\n            <div className=\"flex items-center gap-2 mb-3\">\n                <p className=\"text-sm font-medium text-gray-500 uppercase tracking-wide\">{label}</p>\n                {tooltip && (\n                    <div className=\"relative group/tooltip\">\n                        <Info className=\"w-4 h-4 text-gray-400 cursor-help hover:text-gray-600 transition-colors\" />\n                        <div className=\"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-56 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-xl opacity-0 invisible group-hover/tooltip:opacity-100 group-hover/tooltip:visible transition-all z-10 pointer-events-none leading-relaxed\">\n                            {tooltip}\n                            <div className=\"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-gray-900\" />\n                        </div>\n                    </div>\n                )}\n            </div>\n\n            <div className=\"space-y-3\">\n                <div className=\"flex items-baseline gap-2\">\n                    <h3 className={`text-3xl font-bold tracking-tight ${colorClass}`}>{value}</h3>\n                    {trend !== 'neutral' && (\n                        <span className={`text-xs font-bold px-2 py-0.5 rounded-full ${isPositive ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>\n                            {isPositive ? '↑' : '↓'}\n                        </span>\n                    )}\n                </div>\n\n                {benchmarks && (\n                    <div className=\"space-y-1 pt-2 border-t border-gray-50\">\n                        {benchmarks.map((b, i) => (\n                            <div key={i} className=\"flex justify-between text-xs\">\n                                <span className=\"text-gray-400 font-medium\">{b.label}</span>\n                                <span className=\"text-gray-600 font-mono\">{b.value}</span>\n                            </div>\n                        ))}\n                    </div>\n                )}\n\n                {subValues && (\n                    <div className=\"space-y-1 pt-2 border-t border-gray-50\">\n                        {subValues.map((s, i) => (\n                            <div key={i} className=\"flex justify-between text-xs\">\n                                <span className=\"text-gray-400 font-medium\">{s.label}</span>\n                                <span className=\"text-gray-600 font-mono\">{s.value}</span>\n                            </div>\n                        ))}\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAYe,SAAS,WAAW,EAC/B,KAAK,EACL,KAAK,EACL,UAAU,EACV,SAAS,EACT,KAAK,EACL,OAAO,EACP,OAAO,EACO;IACd,MAAM,aAAa,UAAU;IAE7B,IAAI,aAAa;IACjB,IAAI,UAAU,WAAW;QACrB,IAAI,SAAS;YACT,aAAa,aAAa,iBAAiB;QAC/C,OAAO;YACH,aAAa,aAAa,mBAAmB;QACjD;IACJ;IAEA,qBACI,iOAAC;QAAI,WAAU;;0BACX,iOAAC;gBAAI,WAAU;;kCACX,iOAAC;wBAAE,WAAU;kCAA6D;;;;;;oBACzE,yBACG,iOAAC;wBAAI,WAAU;;0CACX,iOAAC,iPAAI;gCAAC,WAAU;;;;;;0CAChB,iOAAC;gCAAI,WAAU;;oCACV;kDACD,iOAAC;wCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;0BAM/B,iOAAC;gBAAI,WAAU;;kCACX,iOAAC;wBAAI,WAAU;;0CACX,iOAAC;gCAAG,WAAW,CAAC,kCAAkC,EAAE,YAAY;0CAAG;;;;;;4BAClE,UAAU,2BACP,iOAAC;gCAAK,WAAW,CAAC,2CAA2C,EAAE,aAAa,gCAAgC,2BAA2B;0CAClI,aAAa,MAAM;;;;;;;;;;;;oBAK/B,4BACG,iOAAC;wBAAI,WAAU;kCACV,WAAW,GAAG,CAAC,CAAC,GAAG,kBAChB,iOAAC;gCAAY,WAAU;;kDACnB,iOAAC;wCAAK,WAAU;kDAA6B,EAAE,KAAK;;;;;;kDACpD,iOAAC;wCAAK,WAAU;kDAA2B,EAAE,KAAK;;;;;;;+BAF5C;;;;;;;;;;oBAQrB,2BACG,iOAAC;wBAAI,WAAU;kCACV,UAAU,GAAG,CAAC,CAAC,GAAG,kBACf,iOAAC;gCAAY,WAAU;;kDACnB,iOAAC;wCAAK,WAAU;kDAA6B,EAAE,KAAK;;;;;;kDACpD,iOAAC;wCAAK,WAAU;kDAA2B,EAAE,KAAK;;;;;;;+BAF5C;;;;;;;;;;;;;;;;;;;;;;AAUtC;KArEwB"}},
    {"offset": {"line": 190, "column": 0}, "map": {"version":3,"sources":["file:///Users/jvila/WebstormProjects/alpalo-v2/src/components/PerformanceWidgets.tsx"],"sourcesContent":["import React from 'react';\nimport { BacktestResult } from '@/lib/backtest/backtestEngine';\nimport MetricCard from './MetricCard';\n\ninterface PerformanceWidgetsProps {\n    metrics: BacktestResult['metrics'];\n}\n\nexport default function PerformanceWidgets({ metrics }: PerformanceWidgetsProps) {\n    return (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            <MetricCard\n                label=\"Total Return\"\n                value={`${metrics.totalReturn.toFixed(2)}%`}\n                benchmarks={[\n                    { label: 'QQQ', value: `${metrics.benchmark.totalReturn.toFixed(2)}%` },\n                    { label: 'TQQQ', value: `${metrics.benchmarkTQQQ.totalReturn.toFixed(2)}%` }\n                ]}\n                trend={metrics.totalReturn >= 0 ? 'up' : 'down'}\n            />\n            <MetricCard\n                label=\"CAGR\"\n                value={`${metrics.cagr.toFixed(2)}%`}\n                benchmarks={[\n                    { label: 'QQQ', value: `${metrics.benchmark.cagr.toFixed(2)}%` },\n                    { label: 'TQQQ', value: `${metrics.benchmarkTQQQ.cagr.toFixed(2)}%` }\n                ]}\n                trend={metrics.cagr >= 0 ? 'up' : 'down'}\n                tooltip=\"Compound Annual Growth Rate: The mean annual growth rate of an investment over a specified time period longer than one year.\"\n            />\n            <MetricCard\n                label=\"Max Drawdown\"\n                value={`${metrics.maxDrawdown.toFixed(2)}%`}\n                benchmarks={[\n                    { label: 'QQQ', value: `${metrics.benchmark.maxDrawdown.toFixed(2)}%` },\n                    { label: 'TQQQ', value: `${metrics.benchmarkTQQQ.maxDrawdown.toFixed(2)}%` }\n                ]}\n                trend=\"down\"\n                inverse\n                tooltip=\"The maximum observed loss from a peak to a trough of a portfolio, before a new peak is attained.\"\n            />\n            <MetricCard\n                label=\"Avg Trades\"\n                value={metrics.avgTrades.monthly.toFixed(1)}\n                subValues={[\n                    { label: 'Daily', value: metrics.avgTrades.daily.toFixed(2) },\n                    { label: 'Monthly', value: metrics.avgTrades.monthly.toFixed(1) },\n                    { label: 'Annually', value: metrics.avgTrades.annually.toFixed(0) }\n                ]}\n                trend=\"neutral\"\n                tooltip=\"Average number of trades executed over different timeframes.\"\n            />\n            <MetricCard\n                label=\"Win Rate\"\n                value={`${metrics.winRate.winPct.toFixed(1)}%`}\n                subValues={[\n                    { label: 'Wins', value: metrics.winRate.wins.toString() },\n                    { label: 'Losses', value: metrics.winRate.losses.toString() }\n                ]}\n                trend={metrics.winRate.winPct >= 50 ? 'up' : 'down'}\n                tooltip=\"Percentage of winning trades out of total trades.\"\n            />\n            <MetricCard\n                label=\"Avg Position Size\"\n                value={`${metrics.avgPositionSize.toFixed(1)}%`}\n                trend=\"neutral\"\n                tooltip=\"Average percentage of portfolio allocated to each trade.\"\n            />\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;;;AAMe,SAAS,mBAAmB,EAAE,OAAO,EAA2B;IAC3E,qBACI,iOAAC;QAAI,WAAU;;0BACX,iOAAC,kLAAU;gBACP,OAAM;gBACN,OAAO,GAAG,QAAQ,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;gBAC3C,YAAY;oBACR;wBAAE,OAAO;wBAAO,OAAO,GAAG,QAAQ,SAAS,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;oBAAC;oBACtE;wBAAE,OAAO;wBAAQ,OAAO,GAAG,QAAQ,aAAa,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;oBAAC;iBAC9E;gBACD,OAAO,QAAQ,WAAW,IAAI,IAAI,OAAO;;;;;;0BAE7C,iOAAC,kLAAU;gBACP,OAAM;gBACN,OAAO,GAAG,QAAQ,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;gBACpC,YAAY;oBACR;wBAAE,OAAO;wBAAO,OAAO,GAAG,QAAQ,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;oBAAC;oBAC/D;wBAAE,OAAO;wBAAQ,OAAO,GAAG,QAAQ,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;oBAAC;iBACvE;gBACD,OAAO,QAAQ,IAAI,IAAI,IAAI,OAAO;gBAClC,SAAQ;;;;;;0BAEZ,iOAAC,kLAAU;gBACP,OAAM;gBACN,OAAO,GAAG,QAAQ,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;gBAC3C,YAAY;oBACR;wBAAE,OAAO;wBAAO,OAAO,GAAG,QAAQ,SAAS,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;oBAAC;oBACtE;wBAAE,OAAO;wBAAQ,OAAO,GAAG,QAAQ,aAAa,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;oBAAC;iBAC9E;gBACD,OAAM;gBACN,OAAO;gBACP,SAAQ;;;;;;0BAEZ,iOAAC,kLAAU;gBACP,OAAM;gBACN,OAAO,QAAQ,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC;gBACzC,WAAW;oBACP;wBAAE,OAAO;wBAAS,OAAO,QAAQ,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC;oBAAG;oBAC5D;wBAAE,OAAO;wBAAW,OAAO,QAAQ,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC;oBAAG;oBAChE;wBAAE,OAAO;wBAAY,OAAO,QAAQ,SAAS,CAAC,QAAQ,CAAC,OAAO,CAAC;oBAAG;iBACrE;gBACD,OAAM;gBACN,SAAQ;;;;;;0BAEZ,iOAAC,kLAAU;gBACP,OAAM;gBACN,OAAO,GAAG,QAAQ,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;gBAC9C,WAAW;oBACP;wBAAE,OAAO;wBAAQ,OAAO,QAAQ,OAAO,CAAC,IAAI,CAAC,QAAQ;oBAAG;oBACxD;wBAAE,OAAO;wBAAU,OAAO,QAAQ,OAAO,CAAC,MAAM,CAAC,QAAQ;oBAAG;iBAC/D;gBACD,OAAO,QAAQ,OAAO,CAAC,MAAM,IAAI,KAAK,OAAO;gBAC7C,SAAQ;;;;;;0BAEZ,iOAAC,kLAAU;gBACP,OAAM;gBACN,OAAO,GAAG,QAAQ,eAAe,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;gBAC/C,OAAM;gBACN,SAAQ;;;;;;;;;;;;AAIxB;KA9DwB"}},
    {"offset": {"line": 333, "column": 0}, "map": {"version":3,"sources":["file:///Users/jvila/WebstormProjects/alpalo-v2/src/components/EquityChart.tsx"],"sourcesContent":["import React from 'react';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport { TrendingUp } from 'lucide-react';\nimport { BacktestResult } from '@/lib/backtest/backtestEngine';\n\ninterface EquityChartProps {\n    equityCurve: BacktestResult['equityCurve'];\n}\n\nexport default function EquityChart({ equityCurve }: EquityChartProps) {\n    return (\n        <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100\">\n            <div className=\"flex items-center justify-between mb-6\">\n                <h2 className=\"text-lg font-bold text-gray-900 flex items-center gap-2\">\n                    <TrendingUp className=\"w-5 h-5 text-blue-600\" />\n                    Equity Curve\n                </h2>\n                <div className=\"flex items-center gap-4 text-sm\">\n                    <div className=\"flex items-center gap-2\">\n                        <div className=\"w-3 h-3 rounded-full bg-blue-600\" />\n                        <span className=\"text-gray-600 font-medium\">Strategy</span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                        <div className=\"w-3 h-3 rounded-full bg-gray-400\" />\n                        <span className=\"text-gray-600 font-medium\">QQQ</span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                        <div className=\"w-3 h-3 rounded-full bg-purple-500\" />\n                        <span className=\"text-gray-600 font-medium\">TQQQ</span>\n                    </div>\n                </div>\n            </div>\n            <div className=\"h-[400px] w-full\">\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                    <LineChart data={equityCurve}>\n                        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" vertical={false} />\n                        <XAxis\n                            dataKey=\"date\"\n                            stroke=\"#9ca3af\"\n                            tick={{ fontSize: 12 }}\n                            interval=\"preserveStartEnd\"\n                            tickFormatter={(val) => {\n                                const date = new Date(val);\n                                return `${date.getMonth() + 1}/${date.getFullYear().toString().slice(2)}`;\n                            }}\n                        />\n                        <YAxis\n                            domain={['auto', 'auto']}\n                            tick={{ fontSize: 12 }}\n                            tickFormatter={(val) => `${val.toFixed(0)}%`}\n                        />\n                        <Tooltip\n                            contentStyle={{ borderRadius: '8px', border: 'none', boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)' }}\n                            formatter={(val: number) => [`${val.toFixed(2)}%`, '']}\n                            labelFormatter={(label) => {\n                                const date = new Date(label);\n                                return `${date.getMonth() + 1}/${date.getDate()}/${date.getFullYear().toString().slice(2)}`;\n                            }}\n                        />\n                        <Legend />\n                        <Line\n                            type=\"monotone\"\n                            dataKey=\"equity\"\n                            name=\"Strategy\"\n                            stroke=\"#2563eb\"\n                            strokeWidth={2}\n                            dot={false}\n                            activeDot={{ r: 6, strokeWidth: 0 }}\n                        />\n                        <Line\n                            type=\"monotone\"\n                            dataKey=\"benchmark\"\n                            name=\"Benchmark (QQQ)\"\n                            stroke=\"#9ca3af\"\n                            strokeWidth={2}\n                            dot={false}\n                            strokeDasharray=\"5 5\"\n                        />\n                        <Line\n                            type=\"monotone\"\n                            dataKey=\"benchmarkTQQQ\"\n                            name=\"Benchmark (TQQQ)\"\n                            stroke=\"#8b5cf6\"\n                            strokeWidth={2}\n                            dot={false}\n                            strokeDasharray=\"3 3\"\n                        />\n                    </LineChart>\n                </ResponsiveContainer>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;AAOe,SAAS,YAAY,EAAE,WAAW,EAAoB;IACjE,qBACI,iOAAC;QAAI,WAAU;;0BACX,iOAAC;gBAAI,WAAU;;kCACX,iOAAC;wBAAG,WAAU;;0CACV,iOAAC,uQAAU;gCAAC,WAAU;;;;;;4BAA0B;;;;;;;kCAGpD,iOAAC;wBAAI,WAAU;;0CACX,iOAAC;gCAAI,WAAU;;kDACX,iOAAC;wCAAI,WAAU;;;;;;kDACf,iOAAC;wCAAK,WAAU;kDAA4B;;;;;;;;;;;;0CAEhD,iOAAC;gCAAI,WAAU;;kDACX,iOAAC;wCAAI,WAAU;;;;;;kDACf,iOAAC;wCAAK,WAAU;kDAA4B;;;;;;;;;;;;0CAEhD,iOAAC;gCAAI,WAAU;;kDACX,iOAAC;wCAAI,WAAU;;;;;;kDACf,iOAAC;wCAAK,WAAU;kDAA4B;;;;;;;;;;;;;;;;;;;;;;;;0BAIxD,iOAAC;gBAAI,WAAU;0BACX,cAAA,iOAAC,iOAAmB;oBAAC,OAAM;oBAAO,QAAO;8BACrC,cAAA,iOAAC,yMAAS;wBAAC,MAAM;;0CACb,iOAAC,qNAAa;gCAAC,iBAAgB;gCAAM,QAAO;gCAAU,UAAU;;;;;;0CAChE,iOAAC,qMAAK;gCACF,SAAQ;gCACR,QAAO;gCACP,MAAM;oCAAE,UAAU;gCAAG;gCACrB,UAAS;gCACT,eAAe,CAAC;oCACZ,MAAM,OAAO,IAAI,KAAK;oCACtB,OAAO,GAAG,KAAK,QAAQ,KAAK,EAAE,CAAC,EAAE,KAAK,WAAW,GAAG,QAAQ,GAAG,KAAK,CAAC,IAAI;gCAC7E;;;;;;0CAEJ,iOAAC,qMAAK;gCACF,QAAQ;oCAAC;oCAAQ;iCAAO;gCACxB,MAAM;oCAAE,UAAU;gCAAG;gCACrB,eAAe,CAAC,MAAQ,GAAG,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC;;;;;;0CAEhD,iOAAC,yMAAO;gCACJ,cAAc;oCAAE,cAAc;oCAAO,QAAQ;oCAAQ,WAAW;gCAAkC;gCAClG,WAAW,CAAC,MAAgB;wCAAC,GAAG,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC;wCAAE;qCAAG;gCACtD,gBAAgB,CAAC;oCACb,MAAM,OAAO,IAAI,KAAK;oCACtB,OAAO,GAAG,KAAK,QAAQ,KAAK,EAAE,CAAC,EAAE,KAAK,OAAO,GAAG,CAAC,EAAE,KAAK,WAAW,GAAG,QAAQ,GAAG,KAAK,CAAC,IAAI;gCAC/F;;;;;;0CAEJ,iOAAC,uMAAM;;;;;0CACP,iOAAC,mMAAI;gCACD,MAAK;gCACL,SAAQ;gCACR,MAAK;gCACL,QAAO;gCACP,aAAa;gCACb,KAAK;gCACL,WAAW;oCAAE,GAAG;oCAAG,aAAa;gCAAE;;;;;;0CAEtC,iOAAC,mMAAI;gCACD,MAAK;gCACL,SAAQ;gCACR,MAAK;gCACL,QAAO;gCACP,aAAa;gCACb,KAAK;gCACL,iBAAgB;;;;;;0CAEpB,iOAAC,mMAAI;gCACD,MAAK;gCACL,SAAQ;gCACR,MAAK;gCACL,QAAO;gCACP,aAAa;gCACb,KAAK;gCACL,iBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO5C;KAnFwB"}},
    {"offset": {"line": 607, "column": 0}, "map": {"version":3,"sources":["file:///Users/jvila/WebstormProjects/alpalo-v2/src/components/TradeLogTable.tsx"],"sourcesContent":["import React from 'react';\nimport { Trade } from '@/lib/backtest/backtestEngine';\n\ninterface TradeLogTableProps {\n    trades: Trade[];\n}\n\nexport default function TradeLogTable({ trades }: TradeLogTableProps) {\n    const formatDate = (dateStr: string) => {\n        const d = new Date(dateStr);\n        return `${d.getMonth() + 1}/${d.getDate()}/${d.getFullYear().toString().slice(2)}`;\n    };\n\n    return (\n        <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden\">\n            <div className=\"p-6 border-b border-gray-100\">\n                <h2 className=\"text-lg font-bold text-gray-900\">Trade Log</h2>\n            </div>\n            <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full divide-y divide-gray-200\">\n                    <thead className=\"bg-gray-50\">\n                        <tr>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Entry Date</th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Exit Date</th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Symbol</th>\n                            <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Position %</th>\n                            <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Days</th>\n                            <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Trade Return %</th>\n                            <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Portfolio Return %</th>\n                        </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\n                        {trades.map((trade, idx) => (\n                            <tr key={idx} className=\"hover:bg-gray-50 transition-colors\">\n                                <td className=\"px-4 py-3 whitespace-nowrap text-sm text-gray-900\">{formatDate(trade.entryDate)}</td>\n                                <td className=\"px-4 py-3 whitespace-nowrap text-sm text-gray-900\">{trade.exitDate ? formatDate(trade.exitDate) : '-'}</td>\n                                <td className=\"px-4 py-3 whitespace-nowrap text-sm\">\n                                    <span className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800\">\n                                        {trade.symbol}\n                                    </span>\n                                </td>\n                                <td className=\"px-4 py-3 whitespace-nowrap text-sm text-right text-gray-900\">\n                                    {trade.positionSizePct ? `${trade.positionSizePct.toFixed(1)}%` : '-'}\n                                </td>\n                                <td className=\"px-4 py-3 whitespace-nowrap text-sm text-right text-gray-900\">{trade.daysHeld || '-'}</td>\n                                <td className={`px-4 py-3 whitespace-nowrap text-sm text-right font-medium ${(trade.returnPct || 0) >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                                    {trade.returnPct ? `${trade.returnPct.toFixed(2)}%` : '-'}\n                                </td>\n                                <td className={`px-4 py-3 whitespace-nowrap text-sm text-right font-medium ${(trade.portfolioReturnPct || 0) >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                                    {trade.portfolioReturnPct ? `${trade.portfolioReturnPct.toFixed(2)}%` : '-'}\n                                </td>\n                            </tr>\n                        ))}\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;;AAOe,SAAS,cAAc,EAAE,MAAM,EAAsB;IAChE,MAAM,aAAa,CAAC;QAChB,MAAM,IAAI,IAAI,KAAK;QACnB,OAAO,GAAG,EAAE,QAAQ,KAAK,EAAE,CAAC,EAAE,EAAE,OAAO,GAAG,CAAC,EAAE,EAAE,WAAW,GAAG,QAAQ,GAAG,KAAK,CAAC,IAAI;IACtF;IAEA,qBACI,iOAAC;QAAI,WAAU;;0BACX,iOAAC;gBAAI,WAAU;0BACX,cAAA,iOAAC;oBAAG,WAAU;8BAAkC;;;;;;;;;;;0BAEpD,iOAAC;gBAAI,WAAU;0BACX,cAAA,iOAAC;oBAAM,WAAU;;sCACb,iOAAC;4BAAM,WAAU;sCACb,cAAA,iOAAC;;kDACG,iOAAC;wCAAG,WAAU;kDAAiF;;;;;;kDAC/F,iOAAC;wCAAG,WAAU;kDAAiF;;;;;;kDAC/F,iOAAC;wCAAG,WAAU;kDAAiF;;;;;;kDAC/F,iOAAC;wCAAG,WAAU;kDAAkF;;;;;;kDAChG,iOAAC;wCAAG,WAAU;kDAAkF;;;;;;kDAChG,iOAAC;wCAAG,WAAU;kDAAkF;;;;;;kDAChG,iOAAC;wCAAG,WAAU;kDAAkF;;;;;;;;;;;;;;;;;sCAGxG,iOAAC;4BAAM,WAAU;sCACZ,OAAO,GAAG,CAAC,CAAC,OAAO,oBAChB,iOAAC;oCAAa,WAAU;;sDACpB,iOAAC;4CAAG,WAAU;sDAAqD,WAAW,MAAM,SAAS;;;;;;sDAC7F,iOAAC;4CAAG,WAAU;sDAAqD,MAAM,QAAQ,GAAG,WAAW,MAAM,QAAQ,IAAI;;;;;;sDACjH,iOAAC;4CAAG,WAAU;sDACV,cAAA,iOAAC;gDAAK,WAAU;0DACX,MAAM,MAAM;;;;;;;;;;;sDAGrB,iOAAC;4CAAG,WAAU;sDACT,MAAM,eAAe,GAAG,GAAG,MAAM,eAAe,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG;;;;;;sDAEtE,iOAAC;4CAAG,WAAU;sDAAgE,MAAM,QAAQ,IAAI;;;;;;sDAChG,iOAAC;4CAAG,WAAW,CAAC,2DAA2D,EAAE,CAAC,MAAM,SAAS,IAAI,CAAC,KAAK,IAAI,mBAAmB,gBAAgB;sDACzI,MAAM,SAAS,GAAG,GAAG,MAAM,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG;;;;;;sDAE1D,iOAAC;4CAAG,WAAW,CAAC,2DAA2D,EAAE,CAAC,MAAM,kBAAkB,IAAI,CAAC,KAAK,IAAI,mBAAmB,gBAAgB;sDAClJ,MAAM,kBAAkB,GAAG,GAAG,MAAM,kBAAkB,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG;;;;;;;mCAhBvE;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBrC;KAnDwB"}},
    {"offset": {"line": 819, "column": 0}, "map": {"version":3,"sources":["file:///Users/jvila/WebstormProjects/alpalo-v2/src/components/Dashboard.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { Calendar, Play, Activity, AlertTriangle, BarChart2, List } from 'lucide-react';\nimport { BacktestResult } from '@/lib/backtest/backtestEngine';\nimport PerformanceWidgets from './PerformanceWidgets';\nimport EquityChart from './EquityChart';\nimport TradeLogTable from './TradeLogTable';\nimport MonthlyPerformanceMatrix from './MonthlyPerformanceMatrix';\n\nexport default function Dashboard() {\n    const [startDate, setStartDate] = useState('');\n    const [endDate, setEndDate] = useState('');\n    const [minDate, setMinDate] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [result, setResult] = useState<BacktestResult | null>(null);\n    const [error, setError] = useState<string | null>(null);\n    const [activeTab, setActiveTab] = useState<'overview' | 'trades' | 'monthly'>('overview');\n\n    // Auto-populate dates from cache\n    useEffect(() => {\n        fetch('/api/data-range')\n            .then(res => res.json())\n            .then(data => {\n                if (data.oldestDate) {\n                    setStartDate(data.oldestDate);\n                    setMinDate(data.oldestDate);\n                }\n            })\n            .catch(() => { /* Silent fail */ });\n    }, []);\n\n    const runBacktest = async () => {\n        if (!startDate || !endDate) {\n            setError('Please select both start and end dates');\n            return;\n        }\n\n        setLoading(true);\n        setError(null);\n\n        try {\n            const res = await fetch('/api/backtest', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ from: startDate, to: endDate })\n            });\n\n            if (!res.ok) {\n                const errorText = await res.text();\n                throw new Error(errorText || 'Backtest failed');\n            }\n\n            const data = await res.json();\n            setResult(data);\n        } catch (err: unknown) {\n            const message = err instanceof Error ? err.message : 'Unknown error';\n            setError(`Backtest error: ${message}`);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 p-6\">\n            <div className=\"max-w-[1400px] mx-auto\">\n                {/* Header */}\n                <div className=\"mb-8\">\n                    <div className=\"flex items-center gap-3 mb-2\">\n                        <Activity className=\"w-8 h-8 text-blue-600\" />\n                        <h1 className=\"text-4xl font-bold text-gray-900\">Alpalo Engine</h1>\n                    </div>\n                    <p className=\"text-gray-600 text-lg\">Leveraged ETF Momentum Strategy</p>\n                    <div className=\"relative group inline-block mt-2\">\n                        <div className=\"text-xs text-gray-500 cursor-help flex items-center gap-1\">\n                            {/* Omitted for brevity - Strategy info tooltip */}\n                        </div>\n                    </div>\n                </div>\n\n                {/* Input Panel */}\n                <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-8\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 items-end\">\n                        <div>\n                            <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Start Date</label>\n                            <div className=\"relative\">\n                                <Calendar className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                                <input\n                                    type=\"date\"\n                                    value={startDate}\n                                    min={minDate}\n                                    onChange={(e) => setStartDate(e.target.value)}\n                                    className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                                />\n                            </div>\n                        </div>\n                        <div>\n                            <label className=\"block text-sm font-semibold text-gray-700 mb-2\">End Date</label>\n                            <div className=\"relative\">\n                                <Calendar className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                                <input\n                                    type=\"date\"\n                                    value={endDate}\n                                    onChange={(e) => setEndDate(e.target.value)}\n                                    className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                                />\n                            </div>\n                        </div>\n                        <div>\n                            <button\n                                onClick={runBacktest}\n                                disabled={loading}\n                                className={`w-full py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${loading\n                                    ? 'bg-gray-300 cursor-not-allowed'\n                                    : 'bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg hover:shadow-xl'\n                                    }`}\n                            >\n                                <Play className=\"w-5 h-5\" />\n                                {loading ? 'Running...' : 'Run Backtest'}\n                            </button>\n                        </div>\n                    </div>\n\n                    {error && (\n                        <div className=\"mt-4 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3\">\n                            <AlertTriangle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\n                            <p className=\"text-red-800 text-sm\">{error}</p>\n                        </div>\n                    )}\n                </div>\n\n                {/* Results */}\n                {result && (\n                    <div className=\"space-y-8\">\n                        {/* Tabs */}\n                        <div className=\"flex gap-2 border-b border-gray-200\">\n                            <button\n                                onClick={() => setActiveTab('overview')}\n                                className={`px-4 py-2 font-medium flex items-center gap-2 border-b-2 transition-colors ${activeTab === 'overview'\n                                    ? 'border-blue-600 text-blue-600'\n                                    : 'border-transparent text-gray-600 hover:text-gray-900'\n                                    }`}\n                            >\n                                <BarChart2 className=\"w-4 h-4\" />\n                                Overview\n                            </button>\n                            <button\n                                onClick={() => setActiveTab('trades')}\n                                className={`px-4 py-2 font-medium flex items-center gap-2 border-b-2 transition-colors ${activeTab === 'trades'\n                                    ? 'border-blue-600 text-blue-600'\n                                    : 'border-transparent text-gray-600 hover:text-gray-900'\n                                    }`}\n                            >\n                                <List className=\"w-4 h-4\" />\n                                Trades\n                            </button>\n                            <button\n                                onClick={() => setActiveTab('monthly')}\n                                className={`px-4 py-2 font-medium flex items-center gap-2 border-b-2 transition-colors ${activeTab === 'monthly'\n                                    ? 'border-blue-600 text-blue-600'\n                                    : 'border-transparent text-gray-600 hover:text-gray-900'\n                                    }`}\n                            >\n                                <Calendar className=\"w-4 h-4\" />\n                                Monthly\n                            </button>\n                        </div>\n\n                        {/* Tab Content */}\n                        <div>\n                            {/* OVERVIEW TAB */}\n                            {activeTab === 'overview' && (\n                                <div className=\"space-y-8\">\n                                    <PerformanceWidgets metrics={result.metrics} />\n                                    <EquityChart equityCurve={result.equityCurve} />\n                                </div>\n                            )}\n\n                            {/* TRADES TAB */}\n                            {activeTab === 'trades' && (\n                                <TradeLogTable trades={result.trades} />\n                            )}\n\n                            {/* MONTHLY PERFORMANCE TAB */}\n                            {activeTab === 'monthly' && (\n                                <MonthlyPerformanceMatrix equityCurve={result.equityCurve} />\n                            )}\n                        </div>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}