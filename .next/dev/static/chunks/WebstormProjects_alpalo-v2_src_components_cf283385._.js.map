{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jvila/WebstormProjects/alpalo-v2/src/components/MetricCard.tsx"],"sourcesContent":["import React from 'react';\nimport { Info } from 'lucide-react';\n\ninterface MetricCardProps {\n    label: string;\n    value: string | number;\n    benchmarks?: { label: string; value: string | number }[];\n    subValues?: { label: string; value: string | number }[];\n    trend: 'up' | 'down' | 'neutral';\n    inverse?: boolean;\n    tooltip?: string;\n}\n\nexport default function MetricCard({\n    label,\n    value,\n    benchmarks,\n    subValues,\n    trend,\n    inverse,\n    tooltip\n}: MetricCardProps) {\n    const isPositive = trend === 'up';\n\n    let colorClass = 'text-gray-900';\n    if (trend !== 'neutral') {\n        if (inverse) {\n            colorClass = isPositive ? 'text-red-600' : 'text-green-600';\n        } else {\n            colorClass = isPositive ? 'text-green-600' : 'text-red-600';\n        }\n    }\n\n    return (\n        <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200 group relative flex flex-col justify-between h-full\">\n            <div className=\"flex items-center gap-2 mb-3\">\n                <p className=\"text-sm font-medium text-gray-500 uppercase tracking-wide\">{label}</p>\n                {tooltip && (\n                    <div className=\"relative group/tooltip\">\n                        <Info className=\"w-4 h-4 text-gray-400 cursor-help hover:text-gray-600 transition-colors\" />\n                        <div className=\"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-56 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-xl opacity-0 invisible group-hover/tooltip:opacity-100 group-hover/tooltip:visible transition-all z-10 pointer-events-none leading-relaxed\">\n                            {tooltip}\n                            <div className=\"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-gray-900\" />\n                        </div>\n                    </div>\n                )}\n            </div>\n\n            <div className=\"space-y-3\">\n                <div className=\"flex items-baseline gap-2\">\n                    <h3 className={`text-3xl font-bold tracking-tight ${colorClass}`}>{value}</h3>\n                    {trend !== 'neutral' && (\n                        <span className={`text-xs font-bold px-2 py-0.5 rounded-full ${isPositive ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>\n                            {isPositive ? '↑' : '↓'}\n                        </span>\n                    )}\n                </div>\n\n                {benchmarks && (\n                    <div className=\"space-y-1 pt-2 border-t border-gray-50\">\n                        {benchmarks.map((b, i) => (\n                            <div key={i} className=\"flex justify-between text-xs\">\n                                <span className={`font-medium ${b.label === 'QQQ' ? 'text-gray-400' : 'text-purple-500'}`}>{b.label}</span>\n                                <span className=\"text-gray-600 font-mono\">{b.value}</span>\n                            </div>\n                        ))}\n                    </div>\n                )}\n\n                {subValues && (\n                    <div className=\"space-y-1 pt-2 border-t border-gray-50\">\n                        {subValues.map((s, i) => (\n                            <div key={i} className=\"flex justify-between text-xs\">\n                                <span className=\"text-gray-400 font-medium\">{s.label}</span>\n                                <span className=\"text-gray-600 font-mono\">{s.value}</span>\n                            </div>\n                        ))}\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAYe,SAAS,WAAW,EAC/B,KAAK,EACL,KAAK,EACL,UAAU,EACV,SAAS,EACT,KAAK,EACL,OAAO,EACP,OAAO,EACO;IACd,MAAM,aAAa,UAAU;IAE7B,IAAI,aAAa;IACjB,IAAI,UAAU,WAAW;QACrB,IAAI,SAAS;YACT,aAAa,aAAa,iBAAiB;QAC/C,OAAO;YACH,aAAa,aAAa,mBAAmB;QACjD;IACJ;IAEA,qBACI,iOAAC;QAAI,WAAU;;0BACX,iOAAC;gBAAI,WAAU;;kCACX,iOAAC;wBAAE,WAAU;kCAA6D;;;;;;oBACzE,yBACG,iOAAC;wBAAI,WAAU;;0CACX,iOAAC,iPAAI;gCAAC,WAAU;;;;;;0CAChB,iOAAC;gCAAI,WAAU;;oCACV;kDACD,iOAAC;wCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;0BAM/B,iOAAC;gBAAI,WAAU;;kCACX,iOAAC;wBAAI,WAAU;;0CACX,iOAAC;gCAAG,WAAW,CAAC,kCAAkC,EAAE,YAAY;0CAAG;;;;;;4BAClE,UAAU,2BACP,iOAAC;gCAAK,WAAW,CAAC,2CAA2C,EAAE,aAAa,gCAAgC,2BAA2B;0CAClI,aAAa,MAAM;;;;;;;;;;;;oBAK/B,4BACG,iOAAC;wBAAI,WAAU;kCACV,WAAW,GAAG,CAAC,CAAC,GAAG,kBAChB,iOAAC;gCAAY,WAAU;;kDACnB,iOAAC;wCAAK,WAAW,CAAC,YAAY,EAAE,EAAE,KAAK,KAAK,QAAQ,kBAAkB,mBAAmB;kDAAG,EAAE,KAAK;;;;;;kDACnG,iOAAC;wCAAK,WAAU;kDAA2B,EAAE,KAAK;;;;;;;+BAF5C;;;;;;;;;;oBAQrB,2BACG,iOAAC;wBAAI,WAAU;kCACV,UAAU,GAAG,CAAC,CAAC,GAAG,kBACf,iOAAC;gCAAY,WAAU;;kDACnB,iOAAC;wCAAK,WAAU;kDAA6B,EAAE,KAAK;;;;;;kDACpD,iOAAC;wCAAK,WAAU;kDAA2B,EAAE,KAAK;;;;;;;+BAF5C;;;;;;;;;;;;;;;;;;;;;;AAUtC;KArEwB"}},
    {"offset": {"line": 190, "column": 0}, "map": {"version":3,"sources":["file:///Users/jvila/WebstormProjects/alpalo-v2/src/components/PerformanceWidgets.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport { BacktestResult } from '@/lib/backtest/backtestEngine';\nimport MetricCard from './MetricCard';\n\ninterface PerformanceWidgetsProps {\n    metrics: BacktestResult['metrics'];\n}\n\nconst PerformanceWidgets = React.memo(({ metrics }: PerformanceWidgetsProps) => {\n    // Memoize benchmark data to avoid recalculation on every render\n    const benchmarkData = useMemo(() => ({\n        totalReturn: [\n            { label: 'QQQ', value: `${metrics.benchmark.totalReturn.toFixed(2)}%` },\n            { label: 'TQQQ', value: `${metrics.benchmarkTQQQ.totalReturn.toFixed(2)}%` }\n        ],\n        cagr: [\n            { label: 'QQQ', value: `${metrics.benchmark.cagr.toFixed(2)}%` },\n            { label: 'TQQQ', value: `${metrics.benchmarkTQQQ.cagr.toFixed(2)}%` }\n        ],\n        maxDrawdown: [\n            { label: 'QQQ', value: `${metrics.benchmark.maxDrawdown.toFixed(2)}%` },\n            { label: 'TQQQ', value: `${metrics.benchmarkTQQQ.maxDrawdown.toFixed(2)}%` }\n        ]\n    }), [metrics]);\n\n    const avgTradesSubValues = useMemo(() => [\n        { label: 'Daily', value: metrics.avgTrades.daily.toFixed(2) },\n        { label: 'Monthly', value: metrics.avgTrades.monthly.toFixed(1) },\n        { label: 'Annually', value: metrics.avgTrades.annually.toFixed(0) }\n    ], [metrics.avgTrades]);\n\n    const winRateSubValues = useMemo(() => [\n        { label: 'Wins', value: metrics.winRate.wins.toString() },\n        { label: 'Losses', value: metrics.winRate.losses.toString() }\n    ], [metrics.winRate]);\n\n    return (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            <MetricCard\n                label=\"Total Return\"\n                value={`${metrics.totalReturn.toFixed(2)}%`}\n                benchmarks={benchmarkData.totalReturn}\n                trend={metrics.totalReturn >= 0 ? 'up' : 'down'}\n            />\n            <MetricCard\n                label=\"CAGR\"\n                value={`${metrics.cagr.toFixed(2)}%`}\n                benchmarks={benchmarkData.cagr}\n                trend={metrics.cagr >= 0 ? 'up' : 'down'}\n                tooltip=\"Compound Annual Growth Rate: The mean annual growth rate of an investment over a specified time period longer than one year.\"\n            />\n            <MetricCard\n                label=\"Max Drawdown\"\n                value={`${metrics.maxDrawdown.toFixed(2)}%`}\n                benchmarks={benchmarkData.maxDrawdown}\n                trend=\"down\"\n                inverse\n                tooltip=\"The maximum observed loss from a peak to a trough of a portfolio, before a new peak is attained.\"\n            />\n            <MetricCard\n                label=\"Avg Trades\"\n                value={metrics.avgTrades.monthly.toFixed(1)}\n                subValues={avgTradesSubValues}\n                trend=\"neutral\"\n                tooltip=\"Average number of trades executed over different timeframes.\"\n            />\n            <MetricCard\n                label=\"Win Rate\"\n                value={`${metrics.winRate.winPct.toFixed(1)}%`}\n                subValues={winRateSubValues}\n                trend={metrics.winRate.winPct >= 50 ? 'up' : 'down'}\n                tooltip=\"Percentage of winning trades out of total trades.\"\n            />\n            <MetricCard\n                label=\"Avg Position Size\"\n                value={`${metrics.avgPositionSize.toFixed(1)}%`}\n                trend=\"neutral\"\n                tooltip=\"Average percentage of portfolio allocated to each trade.\"\n            />\n        </div>\n    );\n});\n\nPerformanceWidgets.displayName = 'PerformanceWidgets';\n\nexport default PerformanceWidgets;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 360, "column": 0}, "map": {"version":3,"sources":["file:///Users/jvila/WebstormProjects/alpalo-v2/src/components/EquityChart.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport { TrendingUp } from 'lucide-react';\nimport { BacktestResult } from '@/lib/backtest/backtestEngine';\n\ninterface EquityChartProps {\n    equityCurve: BacktestResult['equityCurve'];\n}\n\nconst EquityChart = React.memo(({ equityCurve }: EquityChartProps) => {\n    // Memoize tooltip formatter to avoid recreating on every render\n    const tooltipFormatter = useMemo(() => (val: number) => [`${val.toFixed(2)}%`, ''], []);\n\n    const tooltipLabelFormatter = useMemo(() => (label: string) => {\n        const date = new Date(label);\n        return `${date.getMonth() + 1}/${date.getDate()}/${date.getFullYear().toString().slice(2)}`;\n    }, []);\n\n    const xAxisTickFormatter = useMemo(() => (val: string) => {\n        const date = new Date(val);\n        return `${date.getMonth() + 1}/${date.getFullYear().toString().slice(2)}`;\n    }, []);\n\n    const yAxisTickFormatter = useMemo(() => (val: number) => `${val.toFixed(0)}%`, []);\n\n    return (\n        <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100\">\n            <div className=\"flex items-center justify-between mb-6\">\n                <h2 className=\"text-lg font-bold text-gray-900 flex items-center gap-2\">\n                    <TrendingUp className=\"w-5 h-5 text-blue-600\" />\n                    Equity Curve\n                </h2>\n                <div className=\"flex items-center gap-4 text-sm\">\n                    <div className=\"flex items-center gap-2\">\n                        <div className=\"w-3 h-3 rounded-full bg-blue-600\" />\n                        <span className=\"text-gray-600 font-medium\">Strategy</span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                        <div className=\"w-3 h-3 rounded-full bg-gray-400\" />\n                        <span className=\"text-gray-600 font-medium\">QQQ</span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                        <div className=\"w-3 h-3 rounded-full bg-purple-500\" />\n                        <span className=\"text-gray-600 font-medium\">TQQQ</span>\n                    </div>\n                </div>\n            </div>\n            <div className=\"h-[400px] w-full\">\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                    <LineChart data={equityCurve}>\n                        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" vertical={false} />\n                        <XAxis\n                            dataKey=\"date\"\n                            stroke=\"#9ca3af\"\n                            tick={{ fontSize: 12 }}\n                            interval=\"preserveStartEnd\"\n                            tickFormatter={xAxisTickFormatter}\n                        />\n                        <YAxis\n                            domain={['auto', 'auto']}\n                            tick={{ fontSize: 12 }}\n                            tickFormatter={yAxisTickFormatter}\n                        />\n                        <Tooltip\n                            contentStyle={{ borderRadius: '8px', border: 'none', boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)' }}\n                            formatter={tooltipFormatter}\n                            labelFormatter={tooltipLabelFormatter}\n                        />\n                        <Legend />\n                        <Line\n                            type=\"monotone\"\n                            dataKey=\"equity\"\n                            name=\"Strategy\"\n                            stroke=\"#2563eb\"\n                            strokeWidth={2}\n                            dot={false}\n                            activeDot={{ r: 6, strokeWidth: 0 }}\n                        />\n                        <Line\n                            type=\"monotone\"\n                            dataKey=\"benchmark\"\n                            name=\"Benchmark (QQQ)\"\n                            stroke=\"#9ca3af\"\n                            strokeWidth={2}\n                            dot={false}\n                            strokeDasharray=\"5 5\"\n                        />\n                        <Line\n                            type=\"monotone\"\n                            dataKey=\"benchmarkTQQQ\"\n                            name=\"Benchmark (TQQQ)\"\n                            stroke=\"#8b5cf6\"\n                            strokeWidth={2}\n                            dot={false}\n                            strokeDasharray=\"3 3\"\n                        />\n                    </LineChart>\n                </ResponsiveContainer>\n            </div>\n        </div>\n    );\n});\n\nEquityChart.displayName = 'EquityChart';\n\nexport default EquityChart;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 662, "column": 0}, "map": {"version":3,"sources":["file:///Users/jvila/WebstormProjects/alpalo-v2/src/components/TradeLogTable.tsx"],"sourcesContent":["import React, { useMemo, useCallback } from 'react';\nimport { Trade } from '@/lib/backtest/backtestEngine';\n\ninterface TradeLogTableProps {\n    trades: Trade[];\n}\n\nconst TradeLogTable = React.memo(({ trades }: TradeLogTableProps) => {\n    // Memoize date formatter\n    const formatDate = useCallback((dateStr: string) => {\n        const d = new Date(dateStr);\n        return `${d.getMonth() + 1}/${d.getDate()}/${d.getFullYear().toString().slice(2)}`;\n    }, []);\n\n    return (\n        <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden\">\n            <div className=\"p-6 border-b border-gray-100\">\n                <h2 className=\"text-lg font-bold text-gray-900\">Trade Log</h2>\n            </div>\n            <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full divide-y divide-gray-200\">\n                    <thead className=\"bg-gray-50\">\n                        <tr>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Entry Date</th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Exit Date</th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Symbol</th>\n                            <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Position %</th>\n                            <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Days</th>\n                            <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Trade Return %</th>\n                            <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Portfolio Return %</th>\n                        </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\n                        {trades.map((trade, idx) => (\n                            <tr key={idx} className=\"hover:bg-gray-50 transition-colors\">\n                                <td className=\"px-4 py-3 whitespace-nowrap text-sm text-gray-900\">{formatDate(trade.entryDate)}</td>\n                                <td className=\"px-4 py-3 whitespace-nowrap text-sm text-gray-900\">{trade.exitDate ? formatDate(trade.exitDate) : '-'}</td>\n                                <td className=\"px-4 py-3 whitespace-nowrap text-sm\">\n                                    <span className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800\">\n                                        {trade.symbol}\n                                    </span>\n                                </td>\n                                <td className=\"px-4 py-3 whitespace-nowrap text-sm text-right text-gray-900\">\n                                    {trade.positionSizePct ? `${trade.positionSizePct.toFixed(1)}%` : '-'}\n                                </td>\n                                <td className=\"px-4 py-3 whitespace-nowrap text-sm text-right text-gray-900\">{trade.daysHeld || '-'}</td>\n                                <td className={`px-4 py-3 whitespace-nowrap text-sm text-right font-medium ${(trade.returnPct || 0) >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                                    {trade.returnPct ? `${trade.returnPct.toFixed(2)}%` : '-'}\n                                </td>\n                                <td className={`px-4 py-3 whitespace-nowrap text-sm text-right font-medium ${(trade.portfolioReturnPct || 0) >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                                    {trade.portfolioReturnPct ? `${trade.portfolioReturnPct.toFixed(2)}%` : '-'}\n                                </td>\n                            </tr>\n                        ))}\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    );\n});\n\nTradeLogTable.displayName = 'TradeLogTable';\n\nexport default TradeLogTable;\n"],"names":[],"mappings":";;;;;AAAA;;;;AAOA,MAAM,8BAAgB,GAAA,4MAAK,CAAC,IAAI,SAAC,CAAC,EAAE,MAAM,EAAsB;;IAC5D,yBAAyB;IACzB,MAAM,aAAa,IAAA,gNAAW;iDAAC,CAAC;YAC5B,MAAM,IAAI,IAAI,KAAK;YACnB,OAAO,GAAG,EAAE,QAAQ,KAAK,EAAE,CAAC,EAAE,EAAE,OAAO,GAAG,CAAC,EAAE,EAAE,WAAW,GAAG,QAAQ,GAAG,KAAK,CAAC,IAAI;QACtF;gDAAG,EAAE;IAEL,qBACI,iOAAC;QAAI,WAAU;;0BACX,iOAAC;gBAAI,WAAU;0BACX,cAAA,iOAAC;oBAAG,WAAU;8BAAkC;;;;;;;;;;;0BAEpD,iOAAC;gBAAI,WAAU;0BACX,cAAA,iOAAC;oBAAM,WAAU;;sCACb,iOAAC;4BAAM,WAAU;sCACb,cAAA,iOAAC;;kDACG,iOAAC;wCAAG,WAAU;kDAAiF;;;;;;kDAC/F,iOAAC;wCAAG,WAAU;kDAAiF;;;;;;kDAC/F,iOAAC;wCAAG,WAAU;kDAAiF;;;;;;kDAC/F,iOAAC;wCAAG,WAAU;kDAAkF;;;;;;kDAChG,iOAAC;wCAAG,WAAU;kDAAkF;;;;;;kDAChG,iOAAC;wCAAG,WAAU;kDAAkF;;;;;;kDAChG,iOAAC;wCAAG,WAAU;kDAAkF;;;;;;;;;;;;;;;;;sCAGxG,iOAAC;4BAAM,WAAU;sCACZ,OAAO,GAAG,CAAC,CAAC,OAAO,oBAChB,iOAAC;oCAAa,WAAU;;sDACpB,iOAAC;4CAAG,WAAU;sDAAqD,WAAW,MAAM,SAAS;;;;;;sDAC7F,iOAAC;4CAAG,WAAU;sDAAqD,MAAM,QAAQ,GAAG,WAAW,MAAM,QAAQ,IAAI;;;;;;sDACjH,iOAAC;4CAAG,WAAU;sDACV,cAAA,iOAAC;gDAAK,WAAU;0DACX,MAAM,MAAM;;;;;;;;;;;sDAGrB,iOAAC;4CAAG,WAAU;sDACT,MAAM,eAAe,GAAG,GAAG,MAAM,eAAe,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG;;;;;;sDAEtE,iOAAC;4CAAG,WAAU;sDAAgE,MAAM,QAAQ,IAAI;;;;;;sDAChG,iOAAC;4CAAG,WAAW,CAAC,2DAA2D,EAAE,CAAC,MAAM,SAAS,IAAI,CAAC,KAAK,IAAI,mBAAmB,gBAAgB;sDACzI,MAAM,SAAS,GAAG,GAAG,MAAM,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG;;;;;;sDAE1D,iOAAC;4CAAG,WAAW,CAAC,2DAA2D,EAAE,CAAC,MAAM,kBAAkB,IAAI,CAAC,KAAK,IAAI,mBAAmB,gBAAgB;sDAClJ,MAAM,kBAAkB,GAAG,GAAG,MAAM,kBAAkB,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG;;;;;;;mCAhBvE;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBrC;;AAEA,cAAc,WAAW,GAAG;uCAEb"}},
    {"offset": {"line": 884, "column": 0}, "map": {"version":3,"sources":["file:///Users/jvila/WebstormProjects/alpalo-v2/src/components/MonthlyPerformanceMatrix.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\n\ninterface MonthlyPerformanceMatrixProps {\n    equityCurve: { date: string; equity: number; benchmark: number; benchmarkTQQQ: number }[];\n}\n\nconst MonthlyPerformanceMatrix = React.memo(({ equityCurve }: MonthlyPerformanceMatrixProps) => {\n    const [sortConfig, setSortConfig] = useState<{ key: 'year' | 'ytdStrat' | 'ytdBen' | 'ytdTQQQ'; direction: 'asc' | 'desc' }>({ key: 'year', direction: 'desc' });\n\n    const months = useMemo(() => ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'], []);\n\n    // Memoize monthly returns calculation\n    const { monthlyReturns, ytdReturns, years } = useMemo(() => {\n        const monthlyReturns: Record<string, Record<string, { strategy: number, benchmark: number, benchmarkTQQQ: number }>> = {};\n        const years = Array.from(new Set(equityCurve.map(d => new Date(d.date).getFullYear())));\n\n        // Build the matrix\n        years.forEach(year => {\n            monthlyReturns[year] = {};\n            months.forEach((_, monthIdx) => {\n                const monthData = equityCurve.filter(d => {\n                    const date = new Date(d.date);\n                    return date.getFullYear() === year && date.getMonth() === monthIdx;\n                });\n\n                if (monthData.length > 0) {\n                    const start = monthData[0];\n                    const end = monthData[monthData.length - 1];\n\n                    const startEq = 100 * (1 + start.equity / 100);\n                    const endEq = 100 * (1 + end.equity / 100);\n                    const stratRet = ((endEq - startEq) / startEq) * 100;\n\n                    const startBen = 100 * (1 + start.benchmark / 100);\n                    const endBen = 100 * (1 + end.benchmark / 100);\n                    const benRet = ((endBen - startBen) / startBen) * 100;\n\n                    const startTQQQ = 100 * (1 + start.benchmarkTQQQ / 100);\n                    const endTQQQ = 100 * (1 + end.benchmarkTQQQ / 100);\n                    const tqqqRet = ((endTQQQ - startTQQQ) / startTQQQ) * 100;\n\n                    monthlyReturns[year][monthIdx] = {\n                        strategy: stratRet,\n                        benchmark: benRet,\n                        benchmarkTQQQ: tqqqRet\n                    };\n                }\n            });\n        });\n\n        // Calculate YTD returns\n        const ytdReturns: Record<string, { strategy: number, benchmark: number, benchmarkTQQQ: number }> = {};\n        years.forEach(year => {\n            const yearlyMonths = Object.keys(monthlyReturns[year]).map(Number);\n            if (yearlyMonths.length > 0) {\n                const firstMonth = Math.min(...yearlyMonths);\n                const lastMonth = Math.max(...yearlyMonths);\n\n                const firstData = equityCurve.find(d => {\n                    const date = new Date(d.date);\n                    return date.getFullYear() === year && date.getMonth() === firstMonth;\n                });\n\n                const lastData = equityCurve.filter(d => {\n                    const date = new Date(d.date);\n                    return date.getFullYear() === year && date.getMonth() === lastMonth;\n                }).pop();\n\n                if (firstData && lastData) {\n                    const startEq = 100 * (1 + firstData.equity / 100);\n                    const endEq = 100 * (1 + lastData.equity / 100);\n                    const stratRet = ((endEq - startEq) / startEq) * 100;\n\n                    const startBen = 100 * (1 + firstData.benchmark / 100);\n                    const endBen = 100 * (1 + lastData.benchmark / 100);\n                    const benRet = ((endBen - startBen) / startBen) * 100;\n\n                    const startTQQQ = 100 * (1 + firstData.benchmarkTQQQ / 100);\n                    const endTQQQ = 100 * (1 + lastData.benchmarkTQQQ / 100);\n                    const tqqqRet = ((endTQQQ - startTQQQ) / startTQQQ) * 100;\n\n                    ytdReturns[year] = { strategy: stratRet, benchmark: benRet, benchmarkTQQQ: tqqqRet };\n                }\n            }\n        });\n\n        return { monthlyReturns, ytdReturns, years };\n    }, [equityCurve, months]);\n\n    // Memoize sorted years\n    const sortedYears = useMemo(() => {\n        const sorted = [...years];\n        sorted.sort((a, b) => {\n            if (sortConfig.key === 'year') {\n                return sortConfig.direction === 'asc' ? a - b : b - a;\n            } else {\n                // Map ytd keys to data keys\n                const keyMap: Record<string, 'strategy' | 'benchmark' | 'benchmarkTQQQ'> = {\n                    'ytdStrat': 'strategy',\n                    'ytdBen': 'benchmark',\n                    'ytdTQQQ': 'benchmarkTQQQ'\n                };\n                const dataKey = keyMap[sortConfig.key];\n                const aVal = ytdReturns[a]?.[dataKey] || 0;\n                const bVal = ytdReturns[b]?.[dataKey] || 0;\n                return sortConfig.direction === 'asc' ? aVal - bVal : bVal - aVal;\n            }\n        });\n        return sorted;\n    }, [years, sortConfig, ytdReturns]);\n\n    return (\n        <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 overflow-x-auto\">\n            <h2 className=\"text-lg font-bold text-gray-900 mb-6\">Monthly Performance Matrix</h2>\n            <table className=\"min-w-full text-xs\">\n                <thead className=\"bg-gray-50 sticky top-0\">\n                    <tr>\n                        <th className=\"px-3 py-2 text-center font-bold text-gray-700 cursor-pointer sticky left-0 bg-gray-50 z-10\" onClick={() => setSortConfig({ key: 'year', direction: sortConfig.direction === 'asc' ? 'desc' : 'asc' })}>\n                            Year {sortConfig.key === 'year' && (sortConfig.direction === 'asc' ? '▲' : '▼')}\n                        </th>\n                        {months.map(month => (\n                            <th key={month} className=\"px-2 py-2 text-center font-bold text-gray-700\">{month}</th>\n                        ))}\n                        <th className=\"px-3 py-2 text-center font-bold text-gray-700 bg-gray-100 cursor-pointer sticky right-0 z-10\" onClick={() => setSortConfig({ key: 'ytdStrat', direction: sortConfig.direction === 'asc' ? 'desc' : 'asc' })}>\n                            YTD {sortConfig.key === 'ytdStrat' && (sortConfig.direction === 'asc' ? '▲' : '▼')}\n                        </th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {sortedYears.map(year => {\n                        const ytd = ytdReturns[year];\n                        const ytdStrat = ytd?.strategy || 0;\n                        const ytdBen = ytd?.benchmark || 0;\n                        const ytdTQQQ = ytd?.benchmarkTQQQ || 0;\n\n                        return (\n                            <tr key={year} className=\"border-b border-gray-100 hover:bg-gray-50\">\n                                <td className=\"px-3 py-3 text-center font-bold text-gray-900 sticky left-0 bg-white z-10\">{year}</td>\n                                {months.map((_, monthIdx) => {\n                                    const data = monthlyReturns[year][monthIdx];\n                                    if (!data) {\n                                        return <td key={monthIdx} className=\"px-2 py-3 text-center text-gray-300\">-</td>;\n                                    }\n\n                                    const stratColor = data.strategy >= 0 ? 'text-green-600' : 'text-red-600';\n\n                                    return (\n                                        <td key={monthIdx} className=\"px-2 py-3 text-center text-xs\">\n                                            <div className={`font-bold ${stratColor}`}>{data.strategy.toFixed(1)}%</div>\n                                            <div className=\"flex justify-center gap-1 text-[9px] mt-0.5\">\n                                                <span className=\"text-gray-400\" title=\"QQQ\">{data.benchmark.toFixed(1)}%</span>\n                                                <span className=\"text-purple-500\" title=\"TQQQ\">{data.benchmarkTQQQ.toFixed(1)}%</span>\n                                            </div>\n                                        </td>\n                                    );\n                                })}\n                                <td className=\"px-4 py-3 text-center text-sm font-bold bg-gray-50 sticky right-0 z-10\">\n                                    <div className={ytdStrat >= 0 ? 'text-green-600' : 'text-red-600'}>{ytdStrat.toFixed(1)}%</div>\n                                    <div className=\"flex justify-center gap-2 text-[10px] mt-1\">\n                                        <span className=\"text-gray-400\" title=\"QQQ\">{ytdBen.toFixed(1)}%</span>\n                                        <span className=\"text-purple-500\" title=\"TQQQ\">{ytdTQQQ.toFixed(1)}%</span>\n                                    </div>\n                                </td>\n                            </tr>\n                        );\n                    })}\n                </tbody>\n            </table>\n        </div>\n    );\n});\n\nMonthlyPerformanceMatrix.displayName = 'MonthlyPerformanceMatrix';\n\nexport default MonthlyPerformanceMatrix;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1278, "column": 0}, "map": {"version":3,"sources":["file:///Users/jvila/WebstormProjects/alpalo-v2/src/components/Dashboard.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { Calendar, Play, Activity, AlertTriangle, BarChart2, List } from 'lucide-react';\nimport { BacktestResult } from '@/lib/backtest/backtestEngine';\nimport PerformanceWidgets from './PerformanceWidgets';\nimport EquityChart from './EquityChart';\nimport TradeLogTable from './TradeLogTable';\nimport MonthlyPerformanceMatrix from './MonthlyPerformanceMatrix';\n\nexport default function Dashboard() {\n    const [startDate, setStartDate] = useState('');\n    const [endDate, setEndDate] = useState('');\n    const [minDate, setMinDate] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [result, setResult] = useState<BacktestResult | null>(null);\n    const [error, setError] = useState<string | null>(null);\n    const [activeTab, setActiveTab] = useState<'overview' | 'trades' | 'monthly'>('overview');\n\n    // Auto-populate dates from cache\n    useEffect(() => {\n        fetch('/api/data-range')\n            .then(res => res.json())\n            .then(data => {\n                if (data.oldestDate) {\n                    setStartDate(data.oldestDate);\n                    setMinDate(data.oldestDate);\n                }\n                if (data.newestDate) {\n                    setEndDate(data.newestDate);\n                } else {\n                    // Fallback to current date\n                    setEndDate(new Date().toISOString().split('T')[0]);\n                }\n            })\n            .catch(() => {\n                // Fallback on error\n                setEndDate(new Date().toISOString().split('T')[0]);\n            });\n    }, []);\n\n    const runBacktest = async () => {\n        if (!startDate || !endDate) {\n            setError('Please select both start and end dates');\n            return;\n        }\n\n        setLoading(true);\n        setError(null);\n\n        try {\n            const res = await fetch('/api/backtest', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ from: startDate, to: endDate })\n            });\n\n            if (!res.ok) {\n                const errorText = await res.text();\n                throw new Error(errorText || 'Backtest failed');\n            }\n\n            const data = await res.json();\n            setResult(data);\n        } catch (err: unknown) {\n            const message = err instanceof Error ? err.message : 'Unknown error';\n            setError(`Backtest error: ${message}`);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 p-6\">\n            <div className=\"max-w-[1400px] mx-auto\">\n                {/* Header */}\n                <div className=\"mb-8\">\n                    <div className=\"flex items-center gap-3 mb-2\">\n                        <Activity className=\"w-8 h-8 text-blue-600\" />\n                        <h1 className=\"text-4xl font-bold text-gray-900\">Alpalo Backtest Engine</h1>\n                    </div>\n                    <p className=\"text-gray-600 text-lg\">Leveraged ETF Momentum Strategy</p>\n                    <div className=\"relative group inline-block mt-2\">\n                        <div className=\"text-xs text-gray-500 cursor-help flex items-center gap-1\">\n                            {/* Omitted for brevity - Strategy info tooltip */}\n                        </div>\n                    </div>\n                </div>\n\n                {/* Input Panel */}\n                <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-8\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4 items-end\">\n                        <div className=\"md:col-span-2\">\n                            <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Start Date</label>\n                            <div className=\"relative\">\n                                <Calendar className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                                <input\n                                    type=\"date\"\n                                    value={startDate}\n                                    min={minDate}\n                                    onChange={(e) => setStartDate(e.target.value)}\n                                    className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                                />\n                            </div>\n                        </div>\n                        <div className=\"md:col-span-2\">\n                            <label className=\"block text-sm font-semibold text-gray-700 mb-2\">End Date</label>\n                            <div className=\"relative\">\n                                <Calendar className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                                <input\n                                    type=\"date\"\n                                    value={endDate}\n                                    onChange={(e) => setEndDate(e.target.value)}\n                                    className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\n                                />\n                            </div>\n                        </div>\n                        <div>\n                            <button\n                                onClick={runBacktest}\n                                disabled={loading}\n                                className={`w-full py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ${loading\n                                    ? 'bg-gray-300 cursor-not-allowed'\n                                    : 'bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg hover:shadow-xl'\n                                    }`}\n                            >\n                                <Play className=\"w-5 h-5\" />\n                                {loading ? 'Running...' : 'Run Backtest'}\n                            </button>\n                        </div>\n                    </div>\n\n                    {error && (\n                        <div className=\"mt-4 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3\">\n                            <AlertTriangle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\n                            <p className=\"text-red-800 text-sm\">{error}</p>\n                        </div>\n                    )}\n                </div>\n\n                {/* Results */}\n                {result && (\n                    <div className=\"space-y-8\">\n                        {/* Tabs */}\n                        <div className=\"flex gap-2 border-b border-gray-200\">\n                            <button\n                                onClick={() => setActiveTab('overview')}\n                                className={`px-4 py-2 font-medium flex items-center gap-2 border-b-2 transition-colors ${activeTab === 'overview'\n                                    ? 'border-blue-600 text-blue-600'\n                                    : 'border-transparent text-gray-600 hover:text-gray-900'\n                                    }`}\n                            >\n                                <BarChart2 className=\"w-4 h-4\" />\n                                Overview\n                            </button>\n                            <button\n                                onClick={() => setActiveTab('trades')}\n                                className={`px-4 py-2 font-medium flex items-center gap-2 border-b-2 transition-colors ${activeTab === 'trades'\n                                    ? 'border-blue-600 text-blue-600'\n                                    : 'border-transparent text-gray-600 hover:text-gray-900'\n                                    }`}\n                            >\n                                <List className=\"w-4 h-4\" />\n                                Trades\n                            </button>\n                            <button\n                                onClick={() => setActiveTab('monthly')}\n                                className={`px-4 py-2 font-medium flex items-center gap-2 border-b-2 transition-colors ${activeTab === 'monthly'\n                                    ? 'border-blue-600 text-blue-600'\n                                    : 'border-transparent text-gray-600 hover:text-gray-900'\n                                    }`}\n                            >\n                                <Calendar className=\"w-4 h-4\" />\n                                Monthly\n                            </button>\n                        </div>\n\n                        {/* Tab Content */}\n                        <div>\n                            {/* OVERVIEW TAB */}\n                            {activeTab === 'overview' && (\n                                <div className=\"space-y-8\">\n                                    <PerformanceWidgets metrics={result.metrics} />\n                                    <EquityChart equityCurve={result.equityCurve} />\n                                </div>\n                            )}\n\n                            {/* TRADES TAB */}\n                            {activeTab === 'trades' && (\n                                <TradeLogTable trades={result.trades} />\n                            )}\n\n                            {/* MONTHLY PERFORMANCE TAB */}\n                            {activeTab === 'monthly' && (\n                                <MonthlyPerformanceMatrix equityCurve={result.equityCurve} />\n                            )}\n                        </div>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}