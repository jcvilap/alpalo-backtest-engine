{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/jvila/WebstormProjects/alpalo-v2/src/app/api/data-range/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport fs from 'fs';\nimport path from 'path';\nimport { OHLC } from '@/lib/types';\n\nexport async function GET() {\n    try {\n        const cacheDir = path.join(process.cwd(), 'cache');\n        if (!fs.existsSync(cacheDir)) {\n            return NextResponse.json({ oldestDate: '2020-01-01' }); // Default fallback\n        }\n\n        const files = fs.readdirSync(cacheDir).filter(f => f.endsWith('.json'));\n        let oldestDate = new Date().toISOString().split('T')[0];\n\n        for (const file of files) {\n            const content = fs.readFileSync(path.join(cacheDir, file), 'utf-8');\n            const data: OHLC[] = JSON.parse(content);\n            if (data.length > 0) {\n                const firstDate = data[0].date;\n                if (firstDate < oldestDate) {\n                    oldestDate = firstDate;\n                }\n            }\n        }\n\n        return NextResponse.json({ oldestDate });\n    } catch (error) {\n        console.error('Error reading cache for date range:', error);\n        return NextResponse.json({ oldestDate: '2020-01-01' });\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAGO,eAAe;IAClB,IAAI;QACA,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;QAC1C,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,WAAW;YAC1B,OAAO,oLAAY,CAAC,IAAI,CAAC;gBAAE,YAAY;YAAa,IAAI,mBAAmB;QAC/E;QAEA,MAAM,QAAQ,wGAAE,CAAC,WAAW,CAAC,UAAU,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,CAAC;QAC9D,IAAI,aAAa,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;QAEvD,KAAK,MAAM,QAAQ,MAAO;YACtB,MAAM,UAAU,wGAAE,CAAC,YAAY,CAAC,4GAAI,CAAC,IAAI,CAAC,UAAU,OAAO;YAC3D,MAAM,OAAe,KAAK,KAAK,CAAC;YAChC,IAAI,KAAK,MAAM,GAAG,GAAG;gBACjB,MAAM,YAAY,IAAI,CAAC,EAAE,CAAC,IAAI;gBAC9B,IAAI,YAAY,YAAY;oBACxB,aAAa;gBACjB;YACJ;QACJ;QAEA,OAAO,oLAAY,CAAC,IAAI,CAAC;YAAE;QAAW;IAC1C,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,uCAAuC;QACrD,OAAO,oLAAY,CAAC,IAAI,CAAC;YAAE,YAAY;QAAa;IACxD;AACJ"}}]
}