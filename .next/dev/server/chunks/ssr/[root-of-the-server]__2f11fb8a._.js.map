{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/jvila/WebstormProjects/alpalo-v2/src/components/Dashboard.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport { Calendar, Play, TrendingUp, Activity, AlertTriangle, BarChart2, List, Info } from 'lucide-react';\nimport { BacktestResult, Trade } from '@/lib/backtest/backtestEngine';\n\nexport default function Dashboard() {\n    const [startDate, setStartDate] = useState('');\n    const [endDate, setEndDate] = useState('');\n    const [minDate, setMinDate] = useState('');\n\n    useEffect(() => {\n        setEndDate(new Date().toISOString().split('T')[0]);\n    }, []);\n    const [loading, setLoading] = useState(false);\n    const [result, setResult] = useState<BacktestResult | null>(null);\n    const [error, setError] = useState<string | null>(null);\n    const [activeTab, setActiveTab] = useState<'overview' | 'trades' | 'monthly'>('overview');\n\n    // Auto-populate start date from cache\n    useEffect(() => {\n        fetch('/api/data-range')\n            .then(res => res.json())\n            .then(data => {\n                if (data.oldestDate) {\n                    setStartDate(data.oldestDate);\n                    setMinDate(data.oldestDate);\n                }\n            })\n            .catch(err => console.error('Failed to fetch date range:', err));\n    }, []);\n\n    const runBacktest = async () => {\n        setLoading(true);\n        setError(null);\n        try {\n            const res = await fetch('/api/backtest', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ from: startDate, to: endDate }),\n            });\n\n            const data = await res.json();\n            if (!res.ok) {\n                throw new Error(data.error || 'Failed to run backtest');\n            }\n\n            setResult(data);\n        } catch (err: unknown) {\n            setError(err instanceof Error ? err.message : 'An error occurred');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen bg-gray-50 p-8 font-sans\">\n            <div className=\"max-w-7xl mx-auto space-y-8\">\n\n                {/* Header & Controls */}\n                <div className=\"bg-white rounded-2xl shadow-sm p-6 border border-gray-100\">\n                    <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\n                        <div>\n                            <h1 className=\"text-3xl font-bold text-gray-900 tracking-tight flex items-center gap-2\">\n                                Alpalo Engine\n                                <div className=\"relative group/tooltip\">\n                                    <Info className=\"w-5 h-5 text-gray-400 cursor-help\" />\n                                    <div className=\"absolute top-full left-0 mt-2 w-80 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-xl opacity-0 invisible group-hover/tooltip:opacity-100 group-hover/tooltip:visible transition-all z-20 pointer-events-none leading-relaxed\">\n                                        <p className=\"font-bold mb-1\">Strategy Logic:</p>\n                                        <ul className=\"list-disc pl-4 space-y-1\">\n                                            <li><strong>Trend Following:</strong> Long TQQQ when QQQ {'>'} 200-day MA, otherwise SQQQ.</li>\n                                            <li><strong>Mean Reversion:</strong> Adjusts exposure based on 10-day Rate of Change (ROC).</li>\n                                            <li><strong>Goal:</strong> Capture major trends while hedging against volatility.</li>\n                                        </ul>\n                                    </div>\n                                </div>\n                            </h1>\n                            <p className=\"text-gray-500 mt-1\">Trend Following (MA250) + Mean Reversion (ROC)</p>\n                        </div>\n\n\n                        <div className=\"flex flex-wrap items-end gap-4 bg-gray-50 p-4 rounded-xl border border-gray-200\">\n                            <div className=\"space-y-2\">\n                                <label className=\"text-xs font-semibold text-gray-500 uppercase tracking-wider flex items-center gap-1\">\n                                    <Calendar className=\"w-3 h-3\" /> Start Date\n                                </label>\n                                <input\n                                    type=\"date\"\n                                    value={startDate}\n                                    min={minDate}\n                                    onChange={(e) => setStartDate(e.target.value)}\n                                    className=\"block w-full rounded-lg border-gray-300 bg-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm px-4 py-2.5 transition-colors\"\n                                />\n                            </div>\n                            <div className=\"space-y-2\">\n                                <label className=\"text-xs font-semibold text-gray-500 uppercase tracking-wider flex items-center gap-1\">\n                                    <Calendar className=\"w-3 h-3\" /> End Date\n                                </label>\n                                <input\n                                    type=\"date\"\n                                    value={endDate}\n                                    onChange={(e) => setEndDate(e.target.value)}\n                                    className=\"block w-full rounded-lg border-gray-300 bg-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm px-4 py-2.5 transition-colors\"\n                                />\n                            </div>\n                            <button\n                                onClick={runBacktest}\n                                disabled={loading}\n                                className=\"flex items-center gap-2 bg-blue-600 text-white px-6 py-2.5 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-md hover:shadow-lg font-medium\"\n                            >\n                                {loading ? (\n                                    <>\n                                        <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                                        Running...\n                                    </>\n                                ) : (\n                                    <>\n                                        <Play className=\"w-4 h-4\" />\n                                        Run Backtest\n                                    </>\n                                )}\n                            </button>\n                        </div>\n\n                        {error && (\n                            <div className=\"mt-4 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center gap-3 text-red-700 animate-in fade-in slide-in-from-top-2\">\n                                <AlertTriangle className=\"w-5 h-5 flex-shrink-0\" />\n                                <p className=\"font-medium\">{error}</p>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Tabs */}\n                    <div className=\"flex items-center gap-3 bg-gray-50 p-1 rounded-lg border border-gray-200 w-fit mt-6\">\n                        <button\n                            onClick={() => setActiveTab('overview')}\n                            className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${activeTab === 'overview' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-600 hover:text-gray-900'}`}\n                        >\n                            <Activity className=\"w-4 h-4 inline mr-2\" />\n                            Overview\n                        </button>\n                        <button\n                            onClick={() => setActiveTab('trades')}\n                            className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${activeTab === 'trades' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-600 hover:text-gray-900'}`}\n                        >\n                            <List className=\"w-4 h-4 inline mr-2\" />\n                            Trades\n                        </button>\n                        <button\n                            onClick={() => setActiveTab('monthly')}\n                            className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${activeTab === 'monthly' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-600 hover:text-gray-900'}`}\n                        >\n                            <BarChart2 className=\"w-4 h-4 inline mr-2\" />\n                            Monthly Performance\n                        </button>\n                    </div>\n\n                    {/* Content Area */}\n                    {result && (\n                        <div className=\"mt-8 animate-in fade-in slide-in-from-bottom-4 duration-500\">\n\n                            {/* OVERVIEW TAB */}\n                            {activeTab === 'overview' && (\n                                <div className=\"space-y-8\">\n                                    {/* Metrics Grid */}\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8\">\n                                        <MetricCard\n                                            label=\"Total Return\"\n                                            value={`${result.metrics.totalReturn.toFixed(2)}%`}\n                                            benchmarks={[\n                                                { label: 'QQQ', value: `${result.metrics.benchmark.totalReturn.toFixed(2)}%` },\n                                                { label: 'TQQQ', value: `${result.metrics.benchmarkTQQQ.totalReturn.toFixed(2)}%` }\n                                            ]}\n                                            trend={result.metrics.totalReturn >= 0 ? 'up' : 'down'}\n                                        />\n                                        <MetricCard\n                                            label=\"CAGR\"\n                                            value={`${result.metrics.cagr.toFixed(2)}%`}\n                                            benchmarks={[\n                                                { label: 'QQQ', value: `${result.metrics.benchmark.cagr.toFixed(2)}%` },\n                                                { label: 'TQQQ', value: `${result.metrics.benchmarkTQQQ.cagr.toFixed(2)}%` }\n                                            ]}\n                                            trend={result.metrics.cagr >= 0 ? 'up' : 'down'}\n                                            tooltip=\"Compound Annual Growth Rate: The mean annual growth rate of an investment over a specified time period longer than one year.\"\n                                        />\n                                        <MetricCard\n                                            label=\"Max Drawdown\"\n                                            value={`${result.metrics.maxDrawdown.toFixed(2)}%`}\n                                            benchmarks={[\n                                                { label: 'QQQ', value: `${result.metrics.benchmark.maxDrawdown.toFixed(2)}%` },\n                                                { label: 'TQQQ', value: `${result.metrics.benchmarkTQQQ.maxDrawdown.toFixed(2)}%` }\n                                            ]}\n                                            trend=\"down\"\n                                            inverse\n                                            tooltip=\"The maximum observed loss from a peak to a trough of a portfolio, before a new peak is attained.\"\n                                        />\n                                        <MetricCard\n                                            label=\"Avg Trades\"\n                                            value={result.metrics.avgTrades.monthly.toFixed(1)}\n                                            subValues={[\n                                                { label: 'Daily', value: result.metrics.avgTrades.daily.toFixed(2) },\n                                                { label: 'Monthly', value: result.metrics.avgTrades.monthly.toFixed(1) },\n                                                { label: 'Annually', value: result.metrics.avgTrades.annually.toFixed(0) }\n                                            ]}\n                                            trend=\"neutral\"\n                                            tooltip=\"Average number of trades executed over different timeframes.\"\n                                        />\n                                        <MetricCard\n                                            label=\"Win Rate\"\n                                            value={`${result.metrics.winRate.winPct.toFixed(1)}%`}\n                                            subValues={[\n                                                { label: 'Wins', value: result.metrics.winRate.wins.toString() },\n                                                { label: 'Losses', value: result.metrics.winRate.losses.toString() }\n                                            ]}\n                                            trend={result.metrics.winRate.winPct >= 50 ? 'up' : 'down'}\n                                            tooltip=\"Percentage of winning trades out of total trades.\"\n                                        />\n                                        <MetricCard\n                                            label=\"Avg Position Size\"\n                                            value={`${result.metrics.avgPositionSize.toFixed(1)}%`}\n                                            trend=\"neutral\"\n                                            tooltip=\"Average percentage of portfolio allocated to each trade.\"\n                                        />\n                                    </div>\n\n                                    {/* Chart */}\n                                    <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100\">\n                                        <div className=\"flex items-center justify-between mb-6\">\n                                            <h2 className=\"text-lg font-bold text-gray-900 flex items-center gap-2\">\n                                                <TrendingUp className=\"w-5 h-5 text-blue-600\" />\n                                                Equity Curve\n                                            </h2>\n                                            <div className=\"flex items-center gap-4 text-sm\">\n                                                <div className=\"flex items-center gap-2\">\n                                                    <div className=\"w-3 h-3 rounded-full bg-blue-600\" />\n                                                    <span className=\"text-gray-600 font-medium\">Strategy</span>\n                                                </div>\n                                                <div className=\"flex items-center gap-2\">\n                                                    <div className=\"w-3 h-3 rounded-full bg-gray-400\" />\n                                                    <span className=\"text-gray-600 font-medium\">QQQ</span>\n                                                </div>\n                                                <div className=\"flex items-center gap-2\">\n                                                    <div className=\"w-3 h-3 rounded-full bg-purple-500\" />\n                                                    <span className=\"text-gray-600 font-medium\">TQQQ</span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div className=\"h-[400px] w-full\">\n                                            <ResponsiveContainer width=\"100%\" height=\"100%\">\n                                                <LineChart data={result.equityCurve}>\n                                                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" vertical={false} />\n                                                    <XAxis\n                                                        dataKey=\"date\"\n                                                        stroke=\"#9ca3af\"\n                                                        tick={{ fontSize: 12 }}\n                                                        interval=\"preserveStartEnd\"\n                                                        tickFormatter={(val) => {\n                                                            const date = new Date(val);\n                                                            return `${date.getMonth() + 1}/${date.getFullYear().toString().slice(2)}`;\n                                                        }}\n                                                    />\n                                                    <YAxis\n                                                        domain={['auto', 'auto']}\n                                                        tick={{ fontSize: 12 }}\n                                                        tickFormatter={(val) => `${val.toFixed(0)}%`}\n                                                    />\n                                                    <Tooltip\n                                                        contentStyle={{ borderRadius: '8px', border: 'none', boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)' }}\n                                                        formatter={(val: number) => [`${val.toFixed(2)}%`, '']}\n                                                        labelFormatter={(label) => {\n                                                            const date = new Date(label);\n                                                            return `${date.getMonth() + 1}/${date.getDate()}/${date.getFullYear().toString().slice(2)}`;\n                                                        }}\n                                                    />\n                                                    <Legend />\n                                                    <Line\n                                                        type=\"monotone\"\n                                                        dataKey=\"equity\"\n                                                        name=\"Strategy\"\n                                                        stroke=\"#2563eb\"\n                                                        strokeWidth={2}\n                                                        dot={false}\n                                                        activeDot={{ r: 6, strokeWidth: 0 }}\n                                                    />\n                                                    <Line\n                                                        type=\"monotone\"\n                                                        dataKey=\"benchmark\"\n                                                        name=\"Benchmark (QQQ)\"\n                                                        stroke=\"#9ca3af\"\n                                                        strokeWidth={2}\n                                                        dot={false}\n                                                        strokeDasharray=\"5 5\"\n                                                    />\n                                                    <Line\n                                                        type=\"monotone\"\n                                                        dataKey=\"benchmarkTQQQ\"\n                                                        name=\"Benchmark (TQQQ)\"\n                                                        stroke=\"#8b5cf6\"\n                                                        strokeWidth={2}\n                                                        dot={false}\n                                                        strokeDasharray=\"3 3\"\n                                                    />\n                                                </LineChart>\n                                            </ResponsiveContainer>\n                                        </div>\n                                    </div>\n                                </div>\n                            )}\n\n                            {/* TRADES TAB */}\n                            {activeTab === 'trades' && (\n                                <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden\">\n                                    <div className=\"p-6 border-b border-gray-100\">\n                                        <h2 className=\"text-lg font-bold text-gray-900\">Trade Log</h2>\n                                    </div>\n                                    <div className=\"overflow-x-auto\">\n                                        <table className=\"min-w-full divide-y divide-gray-200\">\n                                            <thead className=\"bg-gray-50\">\n                                                <tr>\n                                                    <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Entry Date</th>\n                                                    <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Exit Date</th>\n                                                    <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Symbol</th>\n                                                    <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Position %</th>\n                                                    <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Days</th>\n                                                    <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Trade Return %</th>\n                                                    <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Portfolio Return %</th>\n                                                </tr>\n                                            </thead>\n                                            <tbody className=\"bg-white divide-y divide-gray-200\">\n                                                {result.trades.map((trade, idx) => {\n                                                    const formatDate = (dateStr: string) => {\n                                                        const d = new Date(dateStr);\n                                                        return `${d.getMonth() + 1}/${d.getDate()}/${d.getFullYear().toString().slice(2)}`;\n                                                    };\n\n                                                    return (\n                                                        <tr key={idx} className=\"hover:bg-gray-50 transition-colors\">\n                                                            <td className=\"px-4 py-3 whitespace-nowrap text-sm text-gray-900\">{formatDate(trade.entryDate)}</td>\n                                                            <td className=\"px-4 py-3 whitespace-nowrap text-sm text-gray-900\">{trade.exitDate ? formatDate(trade.exitDate) : '-'}</td>\n                                                            <td className=\"px-4 py-3 whitespace-nowrap text-sm\">\n                                                                <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800`}>\n                                                                    {trade.symbol}\n                                                                </span>\n                                                            </td>\n                                                            <td className=\"px-4 py-3 whitespace-nowrap text-sm text-right text-gray-900\">\n                                                                {trade.positionSizePct ? `${trade.positionSizePct.toFixed(1)}%` : '-'}\n                                                            </td>\n                                                            <td className=\"px-4 py-3 whitespace-nowrap text-sm text-right text-gray-900\">{trade.daysHeld || '-'}</td>\n                                                            <td className={`px-4 py-3 whitespace-nowrap text-sm text-right font-medium ${(trade.returnPct || 0) >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                                                                {trade.returnPct ? `${trade.returnPct.toFixed(2)}%` : '-'}\n                                                            </td>\n                                                            <td className={`px-4 py-3 whitespace-nowrap text-sm text-right font-medium ${(trade.portfolioReturnPct || 0) >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                                                                {trade.portfolioReturnPct ? `${trade.portfolioReturnPct.toFixed(2)}%` : '-'}\n                                                            </td>\n                                                        </tr>\n                                                    )\n                                                })}\n                                            </tbody>\n                                        </table>\n                                    </div>\n                                </div>\n                            )}\n\n                            {/* MONTHLY PERFORMANCE TAB */}\n                            {activeTab === 'monthly' && (\n                                <MonthlyPerformanceMatrix equityCurve={result.equityCurve} />\n                            )}\n\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nfunction MetricCard({\n    label,\n    value,\n    benchmarks,\n    subValues,\n    trend,\n    inverse,\n    tooltip\n}: {\n    label: string,\n    value: string | number,\n    benchmarks?: { label: string, value: string | number }[],\n    subValues?: { label: string, value: string | number }[],\n    trend: 'up' | 'down' | 'neutral',\n    inverse?: boolean,\n    tooltip?: string\n}) {\n    const isPositive = trend === 'up';\n\n    let colorClass = 'text-gray-900';\n    if (trend !== 'neutral') {\n        if (inverse) {\n            colorClass = isPositive ? 'text-red-600' : 'text-green-600';\n        } else {\n            colorClass = isPositive ? 'text-green-600' : 'text-red-600';\n        }\n    }\n\n    return (\n        <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200 group relative flex flex-col justify-between h-full\">\n            <div className=\"flex items-center gap-2 mb-3\">\n                <p className=\"text-sm font-medium text-gray-500 uppercase tracking-wide\">{label}</p>\n                {tooltip && (\n                    <div className=\"relative group/tooltip\">\n                        <Info className=\"w-4 h-4 text-gray-400 cursor-help hover:text-gray-600 transition-colors\" />\n                        <div className=\"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-56 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-xl opacity-0 invisible group-hover/tooltip:opacity-100 group-hover/tooltip:visible transition-all z-10 pointer-events-none leading-relaxed\">\n                            {tooltip}\n                            <div className=\"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-gray-900\" />\n                        </div>\n                    </div>\n                )}\n            </div>\n\n            <div className=\"space-y-3\">\n                <div className=\"flex items-baseline gap-2\">\n                    <h3 className={`text-3xl font-bold tracking-tight ${colorClass}`}>{value}</h3>\n                    {trend !== 'neutral' && (\n                        <span className={`text-xs font-bold px-2 py-0.5 rounded-full ${isPositive ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>\n                            {isPositive ? '↑' : '↓'}\n                        </span>\n                    )}\n                </div>\n\n                {benchmarks && (\n                    <div className=\"space-y-1 pt-2 border-t border-gray-50\">\n                        {benchmarks.map((b, i) => (\n                            <div key={i} className=\"flex justify-between text-xs\">\n                                <span className=\"text-gray-400 font-medium\">{b.label}</span>\n                                <span className=\"text-gray-600 font-mono\">{b.value}</span>\n                            </div>\n                        ))}\n                    </div>\n                )}\n\n                {subValues && (\n                    <div className=\"grid grid-cols-3 gap-2 pt-2 border-t border-gray-50\">\n                        {subValues.map((s, i) => (\n                            <div key={i} className=\"text-center\">\n                                <div className=\"text-[10px] text-gray-400 uppercase font-bold\">{s.label}</div>\n                                <div className=\"text-xs font-mono text-gray-700\">{s.value}</div>\n                            </div>\n                        ))}\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n\nfunction MonthlyPerformanceMatrix({ equityCurve }: { equityCurve: { date: string; equity: number; benchmark: number; benchmarkTQQQ: number }[] }) {\n    const [sortConfig, setSortConfig] = useState<{ key: 'year' | 'ytdStrat' | 'ytdBen' | 'ytdTQQQ'; direction: 'asc' | 'desc' }>({ key: 'year', direction: 'desc' });\n\n    // Calculate monthly returns\n    const monthlyReturns: Record<string, Record<string, { strategy: number, benchmark: number, benchmarkTQQQ: number }>> = {};\n\n    // Helper to get month/year\n    const getMonthYear = (dateStr: string) => {\n        const date = new Date(dateStr);\n        return { year: date.getFullYear(), month: date.getMonth() };\n    };\n\n    const years = Array.from(new Set(equityCurve.map(d => new Date(d.date).getFullYear())));\n    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\n    // Build the matrix\n    years.forEach(year => {\n        monthlyReturns[year] = {};\n        months.forEach((_, monthIdx) => {\n            const monthData = equityCurve.filter(d => {\n                const { year: y, month: m } = getMonthYear(d.date);\n                return y === year && m === monthIdx;\n            });\n\n            if (monthData.length > 0) {\n                const start = monthData[0];\n                const end = monthData[monthData.length - 1];\n\n                const startEq = 100 * (1 + start.equity / 100);\n                const endEq = 100 * (1 + end.equity / 100);\n                const stratRet = ((endEq - startEq) / startEq) * 100;\n\n                const startBen = 100 * (1 + start.benchmark / 100);\n                const endBen = 100 * (1 + end.benchmark / 100);\n                const benRet = ((endBen - startBen) / startBen) * 100;\n\n                const startTQQQ = 100 * (1 + start.benchmarkTQQQ / 100);\n                const endTQQQ = 100 * (1 + end.benchmarkTQQQ / 100);\n                const tqqqRet = ((endTQQQ - startTQQQ) / startTQQQ) * 100;\n\n                monthlyReturns[year][monthIdx] = { strategy: stratRet, benchmark: benRet, benchmarkTQQQ: tqqqRet };\n            }\n        });\n    });\n\n    // Calculate YTD for sorting\n    const yearStats = years.map(year => {\n        const yearData = equityCurve.filter(d => new Date(d.date).getFullYear() === year);\n        let ytdStrat = 0;\n        let ytdBen = 0;\n        let ytdTQQQ = 0;\n        if (yearData.length > 0) {\n            const start = yearData[0];\n            const end = yearData[yearData.length - 1];\n            const startEq = 100 * (1 + start.equity / 100);\n            const endEq = 100 * (1 + end.equity / 100);\n            ytdStrat = ((endEq - startEq) / startEq) * 100;\n\n            const startBen = 100 * (1 + start.benchmark / 100);\n            const endBen = 100 * (1 + end.benchmark / 100);\n            ytdBen = ((endBen - startBen) / startBen) * 100;\n\n            const startTQQQ = 100 * (1 + start.benchmarkTQQQ / 100);\n            const endTQQQ = 100 * (1 + end.benchmarkTQQQ / 100);\n            ytdTQQQ = ((endTQQQ - startTQQQ) / startTQQQ) * 100;\n        }\n        return { year, ytdStrat, ytdBen, ytdTQQQ };\n    });\n\n    // Sort\n    const sortedYears = [...yearStats].sort((a, b) => {\n        if (a[sortConfig.key] < b[sortConfig.key]) return sortConfig.direction === 'asc' ? -1 : 1;\n        if (a[sortConfig.key] > b[sortConfig.key]) return sortConfig.direction === 'asc' ? 1 : -1;\n        return 0;\n    });\n\n    const handleSort = (key: 'year' | 'ytdStrat' | 'ytdBen' | 'ytdTQQQ') => {\n        setSortConfig(current => ({\n            key,\n            direction: current.key === key && current.direction === 'desc' ? 'asc' : 'desc'\n        }));\n    };\n\n    return (\n        <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden\">\n            <div className=\"p-6 border-b border-gray-100\">\n                <h2 className=\"text-lg font-bold text-gray-900\">Monthly Performance (Strategy vs Benchmark)</h2>\n            </div>\n            <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full divide-y divide-gray-200\">\n                    <thead className=\"bg-gray-50\">\n                        <tr>\n                            <th\n                                className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100\"\n                                onClick={() => handleSort('year')}\n                            >\n                                Year {sortConfig.key === 'year' && (sortConfig.direction === 'asc' ? '↑' : '↓')}\n                            </th>\n                            {months.map(m => (\n                                <th key={m} className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">{m}</th>\n                            ))}\n                            <th\n                                className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100\"\n                                onClick={() => handleSort('ytdStrat')}\n                            >\n                                YTD {sortConfig.key === 'ytdStrat' && (sortConfig.direction === 'asc' ? '↑' : '↓')}\n                            </th>\n                        </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\n                        {sortedYears.map(({ year, ytdStrat, ytdBen, ytdTQQQ }) => {\n                            return (\n                                <tr key={year} className=\"hover:bg-gray-50\">\n                                    <td className=\"px-4 py-3 whitespace-nowrap text-sm font-bold text-gray-900\">{year}</td>\n                                    {months.map((_, monthIdx) => {\n                                        const data = monthlyReturns[year]?.[monthIdx];\n                                        if (!data) return <td key={monthIdx} className=\"px-4 py-3 text-center text-sm text-gray-300\">-</td>;\n\n                                        const stratColor = data.strategy >= 0 ? 'text-green-600' : 'text-red-600';\n                                        const benColor = 'text-gray-400';\n\n                                        return (\n                                            <td key={monthIdx} className=\"px-2 py-3 text-center text-xs\">\n                                                <div className={`font-bold ${stratColor}`}>{data.strategy.toFixed(1)}%</div>\n                                                <div className=\"flex justify-center gap-1 text-[9px] mt-0.5\">\n                                                    <span className={benColor} title=\"QQQ\">{data.benchmark.toFixed(1)}%</span>\n                                                    <span className=\"text-purple-400\" title=\"TQQQ\">{data.benchmarkTQQQ.toFixed(1)}%</span>\n                                                </div>\n                                            </td>\n                                        );\n                                    })}\n                                    <td className=\"px-4 py-3 text-center text-sm font-bold\">\n                                        <div className={ytdStrat >= 0 ? 'text-green-600' : 'text-red-600'}>{ytdStrat.toFixed(1)}%</div>\n                                        <div className=\"flex justify-center gap-2 text-[10px] mt-1\">\n                                            <span className=\"text-gray-400\" title=\"QQQ\">{ytdBen.toFixed(1)}%</span>\n                                            <span className=\"text-purple-400\" title=\"TQQQ\">{ytdTQQQ.toFixed(1)}%</span>\n                                        </div>\n                                    </td>\n                                </tr>\n                            );\n                        })}\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}